---
title: "IMPACT R user training"
author: ""
date: "11-13th February 2019"
output:
  revealjs::revealjs_presentation:
    transition: fade
    css: style.css
    toc: true
  
width: 1920
height: 1080
---

```{r setup, include=FALSE}
# ioslides_presentation slidy_presentation
knitr::opts_chunk$set(echo = FALSE)
```

# General Strategy {data-background="background.svg"}

## IMPACT strategy:

- More Work 

## Data Unit Strategy: {data-background="background.svg"}

- More work => Deeper Analysis
- More work => Fewer Errors
- More work => Less Work


## Components {data-background="background.svg"}

- Culture
- *Capacity* 
- Processes
- Sustainable Change

# Data Unit capacity building framework {data-background="background.svg"}

## ![cbs](./include/capacity_building_scheme.jpg)  {data-background="background.svg"}
## ![cbs](./include/capacity_building_scheme2.jpg) {data-background="background.svg"}
## ![cbs](./include/capacity_building_scheme3.jpg) {data-background="background.svg"}
## ![cbs](./include/capacity_building_scheme4.jpg) {data-background="background.svg"}
## ![cbs](./include/capacity_building_scheme5.jpg) {data-background="background.svg"}

# Learning Goals {data-background="background.svg"}

## NOT the learning Goals {data-background="background.svg"}

- *Not* a training on specific tools
- *Not* a data science degree in 2 days
  - (not statistics)
  - (not generic R)
  - (not quantitative research methods)


## NOT NOT the learning Goals {data-background="background.svg"}

_"Not a training on specific tools"_

- *Instead*: how to access and use all current and future (R) tools developed in IMPACT
- (..with specific tools as concrete examples)

## Examples {data-background="background.svg"}

- simple data cleaning checks
- Analysing random samples (in line with Guidelines)

# Agenda {data-background="background.svg"}

## day 1 {data-background="background.svg"}

- 09:00 - 10:30 Prerequisite test / Introduction / Overview
- 11:00 - 13:00 Sharing Tools in R / at Impact
- 14:00 - 16:00 Practical Session 1A
- 16:30 - 18:00 Practical Session 1B

## day 2 {data-background="background.svg"}

- 09:00 - 10:30 Analysis Guidelines: With great power great responsibility
- 11:00 - 13:00 The "hypegrammaR" package: R implementation of the guidelines
- 14:00 - 16:00 Practical Session 2A
- 16:30 - 18:00 Practical Session 2B

## day 3 {data-background="background.svg"}

- 09:00 - 10:30 Certification Test
- 11:00 - 13:00 Bonus session: Going beyond

## Feedback / Questions? {data-background="background.svg"}


# 1.1.3 why R is Powerful

## *a primitive function*: R commands
```{r,echo=T}
sum(1,1)
```

```{r,echo=T}
sum
```

## *a function*: A few lines of code turned into a new command

```{r,include=F}
some_data<-data.frame(some_variable=rnorm(100),another_variable=rnorm(100)+1.5)
```

```{r,echo=TRUE}
colSums(some_data)
```

The code behind:
```{r,echo=T}
colSums
```

**THIS CHANGES EVERYTHING!!! WHY?**

## a "complicated" function

```{r, echo=T}
library(keras)
application_resnet50
```


## A package


a collection of functions that solve a specific problem

- Standardised
- Reliable
- Documented
- locked & hidden details
- "Stackable": can be used in other functions/packages
- Shared through a standardised channel

## the Result
![number of R packages](../useR/external/number_of_R_packages.svg)
[source](https://www.r-bloggers.com/on-the-growth-of-cran-packages/)


## Questions/Feedback?

# Accessing R Packages

```{r,include=FALSE}
library("UpSetR")
movies <- read.csv( system.file("extdata", "movies.csv", package = "UpSetR"), header=T, sep=";" )
mutations <- read.csv( system.file("extdata", "mutations.csv", package = "UpSetR"), header=T, sep = ",")
```

## Finding Packages

- google _"how to .... in R"_
- tutorials
- https://rseek.org/
- the classics: tidyverse, sf, lubridate, survey, magrittr, rmarkdown 

- RStudio conference (youtube)
- Twitter


## Install
```{R,echo=T,eval=F}
install.packages("UpSetR")
```

## Load
```{r,echo=T,eval=F}
library("UpSetR")
```

## Learn
```{r,echo=T,eval=F}
?UpSetR
?upset
```

## Use
```{R,echo=T}
upset(movies, nsets = 6)
```

## Behind the curtains
```{r,echo=T}
upset
```

full source code: google _"PACKAGENAME site:www.github.com"_

# R Packages on Github

## Gitwhat?

## *git*: a system to manage code projects
    - track and save changes (rewind!)
    - manage parallel versions
    - merge versions
    - collaborate


## *Github* an online platform for git
    - collaborate online
    - share code
    - interact with users/developers
      - bug reports
        - feature requests
        - _not_: asking for help


example 1: [This Presentation](https://github.com/mabafaba/impact_R_user_training/)

example 2: [the 2019 MSNA tool](https://github.com/mabafaba/msna18/network)

example 3: [issues (ggplot2)](https://github.com/tidyverse/ggplot2/issues)



## Installing R packages from Github
```{r, eval=F,echo=T}
remotes::install_github("ellieallien/cleaninginspectoR",
                        build_opts = c()
                        )
```

- "USERNAME/REPOSITORYNAME"
- `build_opts=c()`: also download the manual (see `?remotes::install_github`)

## Load 
```{r, eval=T,echo=T,warning=FALSE,message=FALSE}
library("cleaninginspectoR")
```

### Learn
Overview:
```{r,eval=F,echo=T}
?cleaninginspectoR
```
Manuals / Help Documents
```{r,eval=F,echo=T}
browseVignettes("cleaninginspectoR")
```
List all functions
```{r,echo=T,eval=F}
ls("package:cleaninginspectoR")
```
Type `Packagename::` and hit `tab` to see available functions

```{r,echo=F}
knitr::kable(data.frame("contents"=ls("package:cleaninginspectoR")),format="html")
```
Use!
```{r, echo=T}
find_outliers(some_data)
```


## Getting Started with IMPACT R tools

1. Got to https://rpubs.com/impact_dataunit/impactpackages
2. Follow instructions

## Questions?

... and feedback?

# ~ COFFEE / TEE / NAPS ~

# SESSION 1.2. HANDS ON!

### (slide) Steps:

- _The Data Cleaning Checks Tool_
  	- find the package on the repository list: https://rpubs.com/impact_dataunit/impactpackages
  	- install the package
  	- browse the vignettes; Read the "quickstart" vignette
  	- load your data
  	- read the vignette of the function(s) you are going to use
  	- run the data cleaning checks on your data
  	- save the results to a csv file.

solution: `read.csv("mydata.csv") %>% data_cleaning_checks %>% write.csv`

### Bonus

- file a feature request on the github issues page 

### SESSION 1.1 CLOSE:

- Q&A
- _FEEDBACK_


## SESSION 1.2 (something fun)

# DAY 2

## SESSION 2.1.1 Analysis Guidelines review

## SESSION 2.1.2 hypegrammaR (theory)

## ~COFFEE BREAK~

## SESSION 2.2.1 hypegrammaR practice: installation & setup

## SESSION 2.2.2 hypegrammaR practice: try out hypegrammaR on a real data set


# DAY 3
## SESSION 3.1.1: grand finale
- Q&A
- THE TEST DADADADADA
- chamapgne

## SESSION 3.2.2: BONUS SESSION
- tidyverse?
- rmarkdown: the gold standard of reproducible data science
- custom functions / building tools for yourself



