---
title: "IMPACT R user training"
author: ""
date: "5 February 2019"
output:
  revealjs::revealjs_presentation:
    transition: fade
    css: style.css
    toc: true
width: 1920
height: 1080
---

```{r setup, include=FALSE}
# ioslides_presentation slidy_presentation
knitr::opts_chunk$set(echo = FALSE)
```



# Overview

## Learning Goals

## Accessing Impact R Tools

- NOT: using an IMPACT tool
- Instead: accessing all current/future IMPACT tools
- ..with concrete examples

## Examples

- simple data cleaning checks
- quantitative analysis
    - weighted aggregation
    - hypothesis tests
    - confidence intervals
    - barchart (with error bars)
    - heatmaps
    - .... (all adjusted for stratification & clustering)


## Curriculum

- Day 1
    - Session 1.1
        - Overview
        - Impact Data Unit Capacity Building Framework
        - Expected learnings
        - Why R is Powerful
    - Session 1.2
    - Session 1.3
    - Session 1.4

- Session 2.1
- Session 2.2
- Session 2.3
- Session 2.4

- Session 3.1
- Session 3.2



# 1.1.1 Data Unit capacity building framework
## ![asdf](./include/capacity_building_scheme.jpg)
## ![asdf](./include/capacity_building_scheme2.jpg)
## ![asdf](./include/capacity_building_scheme3.jpg)
## ![asdf](./include/capacity_building_scheme4.jpg)
## ![asdf](./include/capacity_building_scheme5.jpg)

## Feedback / Questions?


# 1.1.3 why R is Powerful
## *a primitive function*: R commands
```{r,echo=T}
sum(1,1)
```

## *a function*: A few lines of code turned into a new command

```{r,include=F}
some_data<-data.frame(some_variable=rnorm(100),another_variable=rnorm(100)+1.5)
```

```{r,echo=TRUE}
colSums(some_data)
```

The code behind:
```{r}
colSums
```

**THIS CHANGES EVERYTHING!!! WHY?**



## A package


a collection of functions that solve a specific problem

- Standardised
- Reliable
- Documented
- locked & hidden details
- "Stackable": can be used in other functions/packages
- Shared through a standardised channel

## the Result
![number of R packages](../useR/external/number_of_R_packages.svg)
[source](https://www.r-bloggers.com/on-the-growth-of-cran-packages/)




# tool Sharing System: in R + at IMPACT

## Accessing R packages: Example

```{r,include=FALSE}
library("UpSetR")
movies <- read.csv( system.file("extdata", "movies.csv", package = "UpSetR"), header=T, sep=";" )
mutations <- read.csv( system.file("extdata", "mutations.csv", package = "UpSetR"), header=T, sep = ",")
```

```{R,echo=T,eval=F}
install.packages("UpSetR")
library("UpSetR")
```

```{R,echo=T}
upset(movies, nsets = 6)
```

```{r}
upset
```

## R Packages
![number of R packages](../useR/external/number_of_R_packages.svg)
[source](https://www.r-bloggers.com/on-the-growth-of-cran-packages/)


## Finding Packages

- google _"how to .... in R"_
- keep learning
- https://rseek.org/
- the classics: tidyverse, sf, lubridate, survey, magrittr, rmarkdown 

## Accessing Packages from CRAN

### Install
```{r, eval=F,echo=T}
install.packages("ggplot2")
```

### Load 
```{r, eval=F,echo=T,warning=FALSE,message=FALSE}
library("ggplot2")
```

### Learn
```{r,eval=F,echo=T}
?ggplot2
browseVignettes("ggplot2")
?ggplot2::geom_histogram
```

## Accessing Packages from Github
### Detour: Gitwhat?

- *git*: a system to manage code projects
    - track and save changes (rewind!)
    - manage parallel versions
    - merge versions
    - collaborate


- *Github* online platform for git
    - collaborate online
    - share code
    - interact with users/developers
      - bug reports
      - feature requests
      - _not_: asking for help


example 1: [This Presentation](https://github.com/mabafaba/impact_R_user_training/)

example 2: [the 2019 MSNA tool](https://github.com/mabafaba/msna18/network)

example 3: [issues (ggplot2)](https://github.com/tidyverse/ggplot2/issues)



### Install
```{r, eval=F,echo=T}
remotes::install_github("ellieallien/cleaninginspectoR",
                        build_opts = c()
                        )
```

### Load 
```{r, eval=T,echo=T,warning=FALSE,message=FALSE}
library("cleaninginspectoR")
```

### Learn

```{r,eval=F,echo=T}
# ?cleaninginspectoR
# browseVignettes("cleaninginspectoR")
# ?
```

List all package functions
```{r,echo=T,eval=F}
ls("package:cleaninginspectoR")
```
```{r,echo=F}
knitr::kable(data.frame("contents"=ls("package:cleaninginspectoR")),format="html")
```
Use!
```{r, echo=T}
# find_outliers(some_data)
```


## Getting Started with IMPACT R tools

1. Got to https://rpubs.com/impact_dataunit/impactpackages
2. Follow instructions

## Questions?

... and feedback?

# ~ COFFEE / TEE / NAPS ~

# SESSION 1.2. HANDS ON!

### (slide) Steps:

- _The Data Cleaning Checks Tool_
  	- find the package on the repository list: https://rpubs.com/impact_dataunit/impactpackages
  	- install the package
  	- browse the vignettes; Read the "quickstart" vignette
  	- load your data
  	- read the vignette of the function(s) you are going to use
  	- run the data cleaning checks on your data
  	- save the results to a csv file.

solution: `read.csv("mydata.csv") %>% data_cleaning_checks %>% write.csv`

### Bonus

- file a feature request on the github issues page 

### SESSION 1.1 CLOSE:

- Q&A
- _FEEDBACK_


## SESSION 1.2 (something fun)

# DAY 2

## SESSION 2.1.1 Analysis Guidelines review

## SESSION 2.1.2 hypegrammaR (theory)

## ~COFFEE BREAK~

## SESSION 2.2.1 hypegrammaR practice: installation & setup

## SESSION 2.2.2 hypegrammaR practice: try out hypegrammaR on a real data set


# DAY 3
## SESSION 3.1.1: grand finale
- Q&A
- THE TEST DADADADADA
- chamapgne

## SESSION 3.2.2: BONUS SESSION
- tidyverse?
- rmarkdown: the gold standard of reproducible data science
- custom functions / building tools for yourself



